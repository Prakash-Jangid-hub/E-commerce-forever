const handleImageChange = (e, index) => {
  const file = e.target.files?.[0];
  if (!file) return;

  // âœ… Basic validation (optional but recommended)
  if (!file.type.startsWith("image/")) {
    alert("Please select an image file.");
    e.target.value = "";
    return;
  }
  const MAX_MB = 5;
  if (file.size > MAX_MB * 1024 * 1024) {
    alert(`Max file size is ${MAX_MB}MB`);
    e.target.value = "";
    return;
  }

  // Update files
  setImages(prev => {
    const copy = [...prev];
    copy[index] = file;
    return copy;
  });

  // Update previews safely
  setPreviews(prev => {
    const copy = [...prev];
    if (copy[index]) URL.revokeObjectURL(copy[index]); // revoke old URL
    copy[index] = URL.createObjectURL(file);           // create new URL
    return copy;
  });

  // Allow re-selecting the same file in some browsers
  e.target.value = "";
};
